<ion-header class="ion-no-border">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="dismiss()">
        <ion-icon slot="icon-only" name="close"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Appointment Details</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div class="modal-content">

    <!-- Status Badge -->
    <div class="status-badge" [attr.data-status]="appt.status">
      <ion-icon [name]="getStatusIcon(appt.status)"></ion-icon>
      <span>{{ getStatusText(appt.status) }}</span>
    </div>

    <!-- Appointment Type Card -->
    <div class="info-card primary-card">
      <div class="card-icon">
        <ion-icon name="medical"></ion-icon>
      </div>
      <div class="card-content">
        <span class="label">Appointment Type</span>
        <h2>{{ appt.appointmentType }}</h2>
      </div>
    </div>

    <!-- Date & Time Card -->
    <div class="info-card">
      <div class="card-icon">
        <ion-icon name="calendar"></ion-icon>
      </div>
      <div class="card-content">
        <span class="label">Date & Time</span>
        <p class="main-text">{{ formatFullDate(appt.date) }}</p>
        <p class="sub-text">
          <ion-icon name="time-outline"></ion-icon>
          {{ appt.time }}
        </p>
      </div>
    </div>

    <!-- Queue Info Card (if checked in or completed) -->
    <div class="info-card queue-card" *ngIf="appt.queueNumberText">
      <div class="card-icon">
        <ion-icon name="ticket"></ion-icon>
      </div>
      <div class="card-content">
        <span class="label">Queue Number</span>
        <h2 class="queue-number">{{ appt.queueNumberText }}</h2>
        <p class="sub-text" *ngIf="appt.checkInAt">
          <ion-icon name="checkmark-circle-outline"></ion-icon>
          Checked in at {{ formatTime(appt.checkInAt) }}
        </p>
      </div>
    </div>

    <!-- Completed Info Card -->
    <div class="info-card success-card" *ngIf="appt.status === 'completed' && appt.completedAt">
      <div class="card-icon">
        <ion-icon name="checkmark-done"></ion-icon>
      </div>
      <div class="card-content">
        <span class="label">Service Completed</span>
        <p class="main-text">{{ formatFullDateTime(appt.completedAt) }}</p>
      </div>
    </div>

    <!-- Cancelled Info Card -->
    <div class="info-card danger-card" *ngIf="appt.status === 'cancelled' && appt.cancelledAt">
      <div class="card-icon">
        <ion-icon name="close-circle"></ion-icon>
      </div>
      <div class="card-content">
        <span class="label">Cancelled On</span>
        <p class="main-text">{{ formatFullDateTime(appt.cancelledAt) }}</p>
      </div>
    </div>

    <!-- Symptoms Card -->
    <div class="info-card" *ngIf="appt.symptoms">
      <div class="card-icon">
        <ion-icon name="fitness"></ion-icon>
      </div>
      <div class="card-content">
        <span class="label">Symptoms</span>
        <p class="main-text">{{ appt.symptoms }}</p>
      </div>
    </div>

    <!-- Notes Card -->
    <div class="info-card" *ngIf="appt.notes">
      <div class="card-icon">
        <ion-icon name="document-text"></ion-icon>
      </div>
      <div class="card-content">
        <span class="label">Additional Notes</span>
        <p class="main-text">{{ appt.notes }}</p>
      </div>
    </div>

    <!-- Created Date -->
    <div class="created-info" *ngIf="appt.createdAt">
      <ion-icon name="information-circle-outline"></ion-icon>
      <span>Booked on {{ formatCreatedDate(appt.createdAt) }}</span>
    </div>

  </div>
</ion-content>

<ion-footer class="ion-no-border">
  <ion-toolbar>
    <ion-button expand="block" (click)="dismiss()" class="close-button">
      Close
    </ion-button>
  </ion-toolbar>
</ion-footer>